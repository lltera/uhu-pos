<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>POS System</title>
</head>
<body>
  <!-- 결제 방식 선택 -->
  <div>
    <label><input type="radio" name="paymentMethod" value="Cash" checked> Cash</label>
    <label><input type="radio" name="paymentMethod" value="Bank Transfer"> Bank Transfer</label>
    <label><input type="radio" name="paymentMethod" value="Online"> Online</label>
  </div>

  <!-- 메뉴 -->
  <div id="menu"></div>

  <!-- 판매 버튼 -->
  <button onclick="sellItems()">Sell</button>

  <!-- 로그 -->
  <div id="log"></div>

  <script>
    const menuItems = [
      { name: "Mix Kimbap", price: 79 },
      { name: "Original Kimbap", price: 79 },
      { name: "ham cheese kimbap", price: 79 },
      { name: "Tuna Mayo Kimbap", price: 79 },
      { name: "bulgogi Kimbap", price: 79 },
      { name: "gochujang Kimbap", price: 79 },
      { name: "Bibimbap", price: 79 },
      { name: "Kimchi Soup", price: 50 },
      { name: "seaweed soup", price: 40 },
      { name: "Tteokbokki", price: 60 }
    ];

    const sheetURL = "https://script.google.com/macros/s/AKfycbz8dfRn6lyjW9t0hJmolBEKFUp2jgTwTjoZtTD5N5o-D2pvZK5Ah9FMd6vWovg50vQUfQ/exec";

    const menuDiv = document.getElementById('menu');
    const logDiv = document.getElementById('log');

    menuItems.forEach(item => {
      const container = document.createElement("div");
      container.innerHTML = `
        ${item.name} (${item.price}฿): 
        <input type="number" id="${item.name}" min="0" value="0" style="width: 50px;" />
      `;
      menuDiv.appendChild(container);
    });

    function sellItems() {
      const payment = document.querySelector('input[name="paymentMethod"]:checked').value;
      menuItems.forEach(item => {
        const qty = parseInt(document.getElementById(item.name).value);
        if (qty > 0) {
          const price = item.price;
          const total = qty * price;

          // Google Sheet에 전송
          fetch(sheetURL, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              item: item.name,
              qty: qty,
              unit_price: price,
              total_price: total,
              payment: payment
            })
          });

          // 화면에 로그 표시
          const p = document.createElement("p");
          p.textContent = `${item.name} x${qty} = ${total}฿ (${payment})`;
          logDiv.appendChild(p);
        }
      });

      // 입력값 초기화
      menuItems.forEach(item => {
        document.getElementById(item.name).value = 0;
      });
    }
  </script>
</body>
</html>
